# Design Specification

## 1. System Architecture Overview

The *Peak Performance* system is structured as a multi-page Streamlit application and is organized into three main layers:

1. **Data Layer:**  
   Ingests and preprocesses player data from CSV files (generated by scraping FBref, Sofascore, and Capology) and supplies clean DataFrames to the application.

2. **Application Layer:**  
   Implements distinct modules:
   - **Exploratory Data Analysis (EDA) & Visualization:**  
     Provides interactive charts and dashboards.
   - **Player Profile & Statistics:**  
     Displays detailed player profiles and seasonal performance trends.
   - **Contract Negotiation Simulator:**  
     Simulates negotiation outcomes using a reinforcement learning model.

3. **Presentation Layer:**  
   Uses Streamlit to render the user interface, including sidebars for filters, interactive charts, and visual announcements.

## 2. Component Specification

### Data Manager
- **Function:**  
  Loads and cleans CSV data; provides methods to query subsets of player data.
- **Inputs:**  
  - File paths to CSV files (e.g., `filtered_playerratingssalaries.csv`)
  - Raw data scraped from FBref, Sofascore, and Capology
- **Outputs:**  
  - Clean Pandas DataFrames with consistent structure
- **Example:**  
  When a user selects a league, the Data Manager returns a filtered DataFrame containing only relevant rows.

### Visualization Manager
- **Function:**  
  Creates interactive visualizations (scatter plots, bar charts, line graphs, radar charts) from the provided DataFrames.
- **Inputs:**  
  - Processed DataFrames and user-defined filters (e.g., season, league)
- **Outputs:**  
  - Rendered plots integrated into the Streamlit UI
- **Example:**  
  Generates a scatter plot displaying player rating vs. salary when the user applies specific filters.

### Contract Negotiation Simulator
- **Function:**  
  Simulates contract negotiation scenarios using a reinforcement learning model.
- **Inputs:**  
  - Detailed player data, proposed wage, contract length
- **Outputs:**  
  - Negotiation outcomes including reward, counteroffer messages, and negotiation logs
- **Example:**  
  When the user inputs a proposed wage, the simulator computes whether the player would accept the offer, counter, or reject it.

## 3. Interaction Diagrams

### Interaction Diagram for Use Case 1: Analyze Player Salary Trends

```mermaid
sequenceDiagram
    participant U as User
    participant DM as Data Manager
    participant VM as Visualization Manager
    U->>DM: Request player data with filters (e.g., league, season)
    DM-->>U: Returns filtered DataFrame
    U->>VM: Request interactive visualizations
    VM-->>U: Render scatter plot and bar charts
